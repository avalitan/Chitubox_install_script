#!/bin/bash
# This script installs Chitubox

FILE="CHITUBOX_V1.6.3.tar.gz"
ICON="chitubox.png"
DESKFILE="chitubox.desktop"
INSTALL_DIR="/usr/bin"
ICONS_DIR="/usr/share/icons/hicolor"
DESKFILES_DIR="/usr/share/applications"

DESKFILECONTENT="[Desktop Entry]
Name=Chitubox
Comment=SLA 3D Printer Slicer
Type=Application
Categories=Graphics;3DGraphics;
Icon=$ICONS_DIR/64x64/apps/$ICON
Terminal=false
TryExec=$INSTALL_DIR/chitubox/AppRun
Exec=$INSTALL_DIR/chitubox/AppRun

"

BASE64ICON='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
wQAAAABJRU5ErkJggg=='

TEMPDIR=$(mktemp --directory)
function finish {
	rm -rf "$TEMPDIR"
}
trap finish EXIT

# Ensure chitubox archive is here
if test -f "$FILE"; then
	echo "Chitubox archive found"
else
	echo "Please download chitubox from their website and place the archive in the same folder as this script"
	echo "https://www.chitubox.com"
	exit 1
fi

# Extract Chitubox to install dir
sudo mkdir $INSTALL_DIR/chitubox
sudo tar -xvf $FILE -C $INSTALL_DIR/chitubox --strip-components 1

echo "$BASE64ICON" | base64 --decode > "$TEMPDIR/$ICON"

# Deploy icons
## 32x32
sudo convert -resize 32x32 $TEMPDIR/$ICON $ICONS_DIR/32x32/apps/$ICON
## 48x48
sudo convert -resize 48x48 $TEMPDIR/$ICON $ICONS_DIR/48x48/apps/$ICON
## 64x64
sudo convert -resize 64x64 $TEMPDIR/$ICON $ICONS_DIR/64x64/apps/$ICON
## 128x128
sudo cp $TEMPDIR/$ICON $ICONS_DIR/128x128/apps/$ICON

# Deploy desktop file (Gnome menu entry)
echo "$DESKFILECONTENT" | sudo tee $DESKFILES_DIR/$DESKFILE

# Create file association
#echo "model/x.stl-binary=chitubox.desktop" | sudo tee -a /usr/share/applications/defaults.list > /dev/null
